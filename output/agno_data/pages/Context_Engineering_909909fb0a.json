{
  "title": "Context Engineering",
  "content": "Source: https://docs.agno.com/basics/context/team/overview\n\nLearn how to write prompts and other context engineering techniques for your teams.\n\nContext engineering is the process of designing and controlling the information (context) that is sent to language models to guide their behavior and outputs.\nIn practice, building context comes down to one question: \"Which information is most likely to achieve the desired outcome?\"\n\nEffective context engineering is an iterative process: refining the system message, trying out different descriptions and instructions, and using features such as schemas, delegation, and tool integrations.\n\nThe context of an Agno team consists of the following:\n\n* **System message**: The system message is the main context that is sent to the team, including all additional context\n* **User message**: The user message is the message that is sent to the team.\n* **Chat history**: The chat history is the history of the conversation between the team and the user.\n* **Additional input**: Any few-shot examples or other additional input that is added to the context.\n\n## System message context\n\nThe following are some key parameters that are used to create the system message:\n\n1. **Description**: A description that guides the overall behaviour of the team.\n2. **Instructions**: A list of precise, task-specific instructions on how to achieve its goal.\n3. **Expected Output**: A description of the expected output from the Team.\n4. **Members**: Information about team members, their roles, and capabilities.\n\nThe system message is built from the team’s description, instructions, member details, and other settings. A team leader’s system message additionally includes delegation rules and coordination guidelines. For example:\n\nWill produce the following system message:\n\n### System message Parameters\n\nThe Team creates a default system message that can be customized using the following parameters:\n\n| Parameter                          | Type        | Default | Description                                                                                                                                                                |\n| ---------------------------------- | ----------- | ------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `description`                      | `str`       | `None`  | A description of the Team that is added to the start of the system message.                                                                                                |\n| `instructions`                     | `List[str]` | `None`  | List of instructions added to the system prompt in `<instructions>` tags. Default instructions are also created depending on values for `markdown`, `expected_output` etc. |\n| `additional_context`               | `str`       | `None`  | Additional context added to the end of the system message.                                                                                                                 |\n| `expected_output`                  | `str`       | `None`  | Provide the expected output from the Team. This is added to the end of the system message.                                                                                 |\n| `markdown`                         | `bool`      | `False` | Add an instruction to format the output using markdown.                                                                                                                    |\n| `add_datetime_to_context`          | `bool`      | `False` | If True, add the current datetime to the prompt to give the team a sense of time. This allows for relative times like \"tomorrow\" to be used in the prompt                  |\n| `add_name_to_context`              | `bool`      | `False` | If True, add the name of the team to the context.                                                                                                                          |\n| `add_location_to_context`          | `bool`      | `False` | If True, add the location of the team to the context. This allows for location-aware responses and local context.                                                          |\n| `timezone_identifier`              | `str`       | `None`  | Allows for custom timezone for datetime instructions following the TZ Database format (e.g. \"Etc/UTC\")                                                                     |\n| `add_member_tools_to_context`      | `bool`      | `True`  | If True, add the tools available to team members to the context.                                                                                                           |\n| `add_session_summary_to_context`   | `bool`      | `False` | If True, add the session summary to the context. See [sessions](/basics/sessions/overview) for more information.                                                           |\n| `add_memories_to_context`          | `bool`      | `False` | If True, add the user memories to the context. See [memory](/basics/memory/overview) for more information.                                                                 |\n| `add_dependencies_to_context`      | `bool`      | `False` | If True, add the dependencies to the context. See [dependencies](/basics/dependencies/overview) for more information.                                                      |\n| `add_session_state_to_context`     | `bool`      | `False` | If True, add the session state to the context. See [state](/basics/state/overview) for more information.                                                                   |\n| `add_knowledge_to_context`         | `bool`      | `False` | If True, add retrieved knowledge to the context, to enable RAG. See [knowledge](/basics/knowledge/overview) for more information.                                          |\n| `enable_agentic_knowledge_filters` | `bool`      | `False` | If True, let the team choose the knowledge filters. See [knowledge](/basics/knowledge/filters/overview) for more information.                                              |\n| `system_message`                   | `str`       | `None`  | Override the default system message.                                                                                                                                       |\n| `respond_directly`                 | `bool`      | `False` | If True, the team leader won't process responses from members and instead will return them directly.                                                                       |\n| `delegate_to_all_members`          | `bool`      | `False` | If True, the team leader will delegate the task to all members simultaneously, instead of one by one. When running async (using `arun`) members will run concurrently.     |\n| `determine_input_for_members`      | `bool`      | `True`  | Set to false if you want to send the run input directly to the member agents.                                                                                              |\n| `share_member_interactions`        | `bool`      | `False` | If True, send all previous member interactions to members.                                                                                                                 |\n| `get_member_information_tool`      | `bool`      | `False` | If True, add a tool to get information about the team members.                                                                                                             |\n\nSee the full [Team reference](/reference/teams/team) for more information.\n\n### How the system message is built\n\nLets take the following example team:\n\nBelow is the system message that will be built:\n\n<Tip>\n  This example is exhaustive and illustrates what is possible with the system message, however in practice you would only use some of these settings.\n</Tip>\n\n#### Additional Context\n\nYou can add additional context to the end of the system message using the `additional_context` parameter.\n\nHere, `additional_context` adds a note to the system message indicating that the team can access specific database tables.\n\n#### Team Member Information\n\nThe member information is automatically injected into the system message. This includes the member ID, name, role, and tools.\nYou can optionally minimize this by setting `add_member_tools_to_context` to False, which removes the member tools from the system message.\n\nYou can also give the team leader a tool to get information about the team members.\n\n#### Tool Instructions\n\nIf you are using a [Toolkit](/integrations/toolkits/overview) on your team, you can add tool instructions to the system message using the `instructions` parameter:\n\nThese instructions are injected into the system message after the `<additional_information>` tags.\n\n#### Agentic Memories\n\nIf you have `enable_agentic_memory` set to `True` on your team, the team gets the ability to create/update user memories using tools.\n\nThis adds the following to the system message:\n\n#### Agentic Knowledge Filters\n\nIf you have knowledge enabled on your team, you can let the team choose the knowledge filters using the `enable_agentic_knowledge_filters` parameter.\n\nThis will add the following to the system message:\n\nLearn about agentic knowledge filters in more detail in the [knowledge filters](/basics/knowledge/filters/overview) section.\n\n### Set the system message directly\n\nYou can manually set the system message using the `system_message` parameter. This will ignore all other settings and use the system message you provide.\n\n## User message context\n\nThe `input` sent to the `Team.run()` or `Team.print_response()` is used as the user message.\n\nSee [dependencies](/basics/dependencies/overview) for how to do dependency injection for your user message.\n\n### Additional user message context\n\nBy default, the user message is built using the `input` sent to the `Team.run()` or `Team.print_response()` functions.\n\nThe following team parameters configure how the user message is built:\n\n* `add_knowledge_to_context`\n* `add_dependencies_to_context`\n\nThe user message that is sent to the model will look like this:\n\nIf you have database storage enabled on your team, session history is automatically stored (see [sessions](/basics/sessions/overview)).\n\nYou can now add the history of the conversation to the context using `add_history_to_context`.\n\nThis will add the history of the conversation to the context, which can be used to provide context for the next message.\n\nSee more details on [sessions](/basics/chat-history/overview).\n\n<Note>All team member runs are added to the team session history.</Note>\n\n## Managing Tool Calls\n\n<Badge icon=\"code-branch\" color=\"orange\">\n  <Tooltip tip=\"Introduced in v2.2.1\" cta=\"View release notes\" href=\"https://github.com/agno-agi/agno/releases/tag/v2.2.1\">v2.2.1</Tooltip>\n</Badge>\n\nThe `max_tool_calls_from_history` parameter can be used to add only the `n` most recent tool calls from history to the context.\n\nThis helps manage context size and reduce token costs during team runs.\n\n```python  theme={null}\nfrom agno.agent import Agent\nfrom agno.db.sqlite import SqliteDb\nfrom agno.models.openai import OpenAIChat\nfrom agno.team import Team\nfrom agno.tools.duckduckgo import DuckDuckGoTools\n\nweb_agent = Agent(\n    name=\"Web Researcher\",\n    model=OpenAIChat(id=\"gpt-4o-mini\"),\n    instructions=\"You are a web researcher. Search the web for comprehensive information on given topics.\",\n    tools=[DuckDuckGoTools()],\n)\n\nteam = Team(\n    members=[web_agent],\n    model=OpenAIChat(id=\"gpt-4o\"),\n    db=SqliteDb(db_file=\"tmp/filter_history_tool_calls_team.db\"),\n    add_history_to_context=True,\n    max_tool_calls_from_history=5,  # Keep only last 5 tool calls in context\n    show_members_responses=True,\n)\n\nteam.print_response(\"Search for AI news\")\nteam.print_response(\"Search for crypto trends\")\nteam.print_response(\"Search for tech stocks\")",
  "code_samples": [
    {
      "code": "Will produce the following system message:",
      "language": "unknown"
    },
    {
      "code": "### System message Parameters\n\nThe Team creates a default system message that can be customized using the following parameters:\n\n| Parameter                          | Type        | Default | Description                                                                                                                                                                |\n| ---------------------------------- | ----------- | ------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `description`                      | `str`       | `None`  | A description of the Team that is added to the start of the system message.                                                                                                |\n| `instructions`                     | `List[str]` | `None`  | List of instructions added to the system prompt in `<instructions>` tags. Default instructions are also created depending on values for `markdown`, `expected_output` etc. |\n| `additional_context`               | `str`       | `None`  | Additional context added to the end of the system message.                                                                                                                 |\n| `expected_output`                  | `str`       | `None`  | Provide the expected output from the Team. This is added to the end of the system message.                                                                                 |\n| `markdown`                         | `bool`      | `False` | Add an instruction to format the output using markdown.                                                                                                                    |\n| `add_datetime_to_context`          | `bool`      | `False` | If True, add the current datetime to the prompt to give the team a sense of time. This allows for relative times like \"tomorrow\" to be used in the prompt                  |\n| `add_name_to_context`              | `bool`      | `False` | If True, add the name of the team to the context.                                                                                                                          |\n| `add_location_to_context`          | `bool`      | `False` | If True, add the location of the team to the context. This allows for location-aware responses and local context.                                                          |\n| `timezone_identifier`              | `str`       | `None`  | Allows for custom timezone for datetime instructions following the TZ Database format (e.g. \"Etc/UTC\")                                                                     |\n| `add_member_tools_to_context`      | `bool`      | `True`  | If True, add the tools available to team members to the context.                                                                                                           |\n| `add_session_summary_to_context`   | `bool`      | `False` | If True, add the session summary to the context. See [sessions](/basics/sessions/overview) for more information.                                                           |\n| `add_memories_to_context`          | `bool`      | `False` | If True, add the user memories to the context. See [memory](/basics/memory/overview) for more information.                                                                 |\n| `add_dependencies_to_context`      | `bool`      | `False` | If True, add the dependencies to the context. See [dependencies](/basics/dependencies/overview) for more information.                                                      |\n| `add_session_state_to_context`     | `bool`      | `False` | If True, add the session state to the context. See [state](/basics/state/overview) for more information.                                                                   |\n| `add_knowledge_to_context`         | `bool`      | `False` | If True, add retrieved knowledge to the context, to enable RAG. See [knowledge](/basics/knowledge/overview) for more information.                                          |\n| `enable_agentic_knowledge_filters` | `bool`      | `False` | If True, let the team choose the knowledge filters. See [knowledge](/basics/knowledge/filters/overview) for more information.                                              |\n| `system_message`                   | `str`       | `None`  | Override the default system message.                                                                                                                                       |\n| `respond_directly`                 | `bool`      | `False` | If True, the team leader won't process responses from members and instead will return them directly.                                                                       |\n| `delegate_to_all_members`          | `bool`      | `False` | If True, the team leader will delegate the task to all members simultaneously, instead of one by one. When running async (using `arun`) members will run concurrently.     |\n| `determine_input_for_members`      | `bool`      | `True`  | Set to false if you want to send the run input directly to the member agents.                                                                                              |\n| `share_member_interactions`        | `bool`      | `False` | If True, send all previous member interactions to members.                                                                                                                 |\n| `get_member_information_tool`      | `bool`      | `False` | If True, add a tool to get information about the team members.                                                                                                             |\n\nSee the full [Team reference](/reference/teams/team) for more information.\n\n### How the system message is built\n\nLets take the following example team:",
      "language": "unknown"
    },
    {
      "code": "Below is the system message that will be built:",
      "language": "unknown"
    },
    {
      "code": "<Tip>\n  This example is exhaustive and illustrates what is possible with the system message, however in practice you would only use some of these settings.\n</Tip>\n\n#### Additional Context\n\nYou can add additional context to the end of the system message using the `additional_context` parameter.\n\nHere, `additional_context` adds a note to the system message indicating that the team can access specific database tables.",
      "language": "unknown"
    },
    {
      "code": "#### Team Member Information\n\nThe member information is automatically injected into the system message. This includes the member ID, name, role, and tools.\nYou can optionally minimize this by setting `add_member_tools_to_context` to False, which removes the member tools from the system message.\n\nYou can also give the team leader a tool to get information about the team members.",
      "language": "unknown"
    },
    {
      "code": "#### Tool Instructions\n\nIf you are using a [Toolkit](/integrations/toolkits/overview) on your team, you can add tool instructions to the system message using the `instructions` parameter:",
      "language": "unknown"
    },
    {
      "code": "These instructions are injected into the system message after the `<additional_information>` tags.\n\n#### Agentic Memories\n\nIf you have `enable_agentic_memory` set to `True` on your team, the team gets the ability to create/update user memories using tools.\n\nThis adds the following to the system message:",
      "language": "unknown"
    },
    {
      "code": "#### Agentic Knowledge Filters\n\nIf you have knowledge enabled on your team, you can let the team choose the knowledge filters using the `enable_agentic_knowledge_filters` parameter.\n\nThis will add the following to the system message:",
      "language": "unknown"
    },
    {
      "code": "Learn about agentic knowledge filters in more detail in the [knowledge filters](/basics/knowledge/filters/overview) section.\n\n### Set the system message directly\n\nYou can manually set the system message using the `system_message` parameter. This will ignore all other settings and use the system message you provide.",
      "language": "unknown"
    },
    {
      "code": "## User message context\n\nThe `input` sent to the `Team.run()` or `Team.print_response()` is used as the user message.\n\nSee [dependencies](/basics/dependencies/overview) for how to do dependency injection for your user message.\n\n### Additional user message context\n\nBy default, the user message is built using the `input` sent to the `Team.run()` or `Team.print_response()` functions.\n\nThe following team parameters configure how the user message is built:\n\n* `add_knowledge_to_context`\n* `add_dependencies_to_context`",
      "language": "unknown"
    },
    {
      "code": "The user message that is sent to the model will look like this:",
      "language": "unknown"
    },
    {
      "code": "## Chat history\n\nIf you have database storage enabled on your team, session history is automatically stored (see [sessions](/basics/sessions/overview)).\n\nYou can now add the history of the conversation to the context using `add_history_to_context`.",
      "language": "unknown"
    },
    {
      "code": "This will add the history of the conversation to the context, which can be used to provide context for the next message.\n\nSee more details on [sessions](/basics/chat-history/overview).\n\n<Note>All team member runs are added to the team session history.</Note>\n\n## Managing Tool Calls\n\n<Badge icon=\"code-branch\" color=\"orange\">\n  <Tooltip tip=\"Introduced in v2.2.1\" cta=\"View release notes\" href=\"https://github.com/agno-agi/agno/releases/tag/v2.2.1\">v2.2.1</Tooltip>\n</Badge>\n\nThe `max_tool_calls_from_history` parameter can be used to add only the `n` most recent tool calls from history to the context.\n\nThis helps manage context size and reduce token costs during team runs.",
      "language": "unknown"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "System message context",
      "id": "system-message-context"
    },
    {
      "level": "h3",
      "text": "System message Parameters",
      "id": "system-message-parameters"
    },
    {
      "level": "h3",
      "text": "How the system message is built",
      "id": "how-the-system-message-is-built"
    },
    {
      "level": "h3",
      "text": "Set the system message directly",
      "id": "set-the-system-message-directly"
    },
    {
      "level": "h2",
      "text": "User message context",
      "id": "user-message-context"
    },
    {
      "level": "h3",
      "text": "Additional user message context",
      "id": "additional-user-message-context"
    },
    {
      "level": "h2",
      "text": "Chat history",
      "id": "chat-history"
    },
    {
      "level": "h2",
      "text": "Managing Tool Calls",
      "id": "managing-tool-calls"
    }
  ],
  "url": "llms-txt#context-engineering",
  "links": []
}
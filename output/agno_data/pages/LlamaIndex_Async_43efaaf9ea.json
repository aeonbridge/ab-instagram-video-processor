{
  "title": "LlamaIndex Async",
  "content": "Source: https://docs.agno.com/integrations/vectordb/llamaindex/usage/async-llamaindex-db\n\n```python cookbook/knowledge/vector_db/llamaindex_db/llamaindex_db.py theme={null}\nimport asyncio\nfrom pathlib import Path\nfrom shutil import rmtree\n\nimport httpx\nfrom agno.agent import Agent\nfrom agno.knowledge.knowledge import Knowledge\nfrom agno.vectordb.llamaindex import LlamaIndexVectorDb\nfrom llama_index.core import (\n    SimpleDirectoryReader,\n    StorageContext,\n    VectorStoreIndex,\n)\nfrom llama_index.core.node_parser import SentenceSplitter\nfrom llama_index.core.retrievers import VectorIndexRetriever\n\ndata_dir = Path(__file__).parent.parent.parent.joinpath(\"wip\", \"data\", \"paul_graham\")\nif data_dir.is_dir():\n    rmtree(path=data_dir, ignore_errors=True)\ndata_dir.mkdir(parents=True, exist_ok=True)\n\nurl = \"https://raw.githubusercontent.com/run-llama/llama_index/main/docs/docs/examples/data/paul_graham/paul_graham_essay.txt\"\nfile_path = data_dir.joinpath(\"paul_graham_essay.txt\")\nresponse = httpx.get(url)\nif response.status_code == 200:\n    with open(file_path, \"wb\") as file:\n        file.write(response.content)\n    print(f\"File downloaded and saved as {file_path}\")\nelse:\n    print(\"Failed to download the file\")\n\ndocuments = SimpleDirectoryReader(str(data_dir)).load_data()\n\nsplitter = SentenceSplitter(chunk_size=1024)\n\nnodes = splitter.get_nodes_from_documents(documents)\n\nstorage_context = StorageContext.from_defaults()\n\nindex = VectorStoreIndex(nodes=nodes, storage_context=storage_context)\n\nknowledge_retriever = VectorIndexRetriever(index)\n\nknowledge = Knowledge(\n    vector_db=LlamaIndexVectorDb(knowledge_retriever=knowledge_retriever)\n)",
  "code_samples": [],
  "headings": [
    {
      "level": "h2",
      "text": "Code",
      "id": "code"
    }
  ],
  "url": "llms-txt#llamaindex-async",
  "links": []
}
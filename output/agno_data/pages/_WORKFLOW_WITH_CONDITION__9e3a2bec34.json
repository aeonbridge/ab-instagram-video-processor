{
  "title": "=== WORKFLOW WITH CONDITION ===",
  "content": "workflow = Workflow(\n    name=\"Story Generation with Conditional Editing\",\n    description=\"A workflow that generates stories, conditionally edits them, formats them, and adds references\",\n    agent=workflow_agent,\n    steps=[\n        write_step,\n        Condition(\n            name=\"editing_condition\",\n            description=\"Check if story needs editing\",\n            evaluator=needs_editing,\n            steps=[edit_step],\n        ),\n        format_step,\n        add_references,\n    ],\n    db=PostgresDb(db_url),\n)\n\nasync def main():\n    \"\"\"Async main function\"\"\"\n    print(\"\\n\" + \"=\" * 80)\n    print(\"WORKFLOW WITH CONDITION - ASYNC STREAMING\")\n    print(\"=\" * 80)\n\n# First call - will run the workflow with condition\n    print(\"\\n\" + \"=\" * 80)\n    print(\"FIRST CALL: Tell me a story about a brave knight\")\n    print(\"=\" * 80)\n    await workflow.aprint_response(\n        \"Tell me a story about a brave knight\",\n        stream=True,\n    )\n\n# Second call - should answer from history without re-running workflow\n    print(\"\\n\" + \"=\" * 80)\n    print(\"SECOND CALL: What was the knight's name?\")\n    print(\"=\" * 80)\n    await workflow.aprint_response(\n        \"What was the knight's name?\",\n        stream=True,\n    )\n\n# Third call - new topic, should run workflow again\n    print(\"\\n\" + \"=\" * 80)\n    print(\"THIRD CALL: Now tell me about a cat\")\n    print(\"=\" * 80)\n    await workflow.aprint_response(\n        \"Now tell me about a cat\",\n        stream=True,\n    )\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n```",
  "code_samples": [],
  "headings": [],
  "url": "llms-txt#===-workflow-with-condition-===",
  "links": []
}
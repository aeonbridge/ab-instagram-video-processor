{
  "title": "Conversational Workflows",
  "content": "Source: https://docs.agno.com/basics/workflows/conversational-workflows\n\nLearn about conversational workflows in Agno.\n\n<Badge icon=\"code-branch\" color=\"orange\">\n  <Tooltip tip=\"Introduced in v2.2.6\" cta=\"View release notes\" href=\"https://github.com/agno-agi/agno/releases/tag/v2.2.6\">v2.2.6</Tooltip>\n</Badge>\n\nIf your users interact directly with a Workflow, it is often useful to make it a **Conversational Workflow**. Users will then be able to chat with the Workflow,\nin the same way you'd interact with an Agent or a Team.\n\nThis feature allows you to add a `WorkflowAgent` to your workflow that intelligently decides whether to:\n\n1. **Answer directly** based on the current input and past workflow results\n2. **Run the workflow** when the input cannot be answered based on past results\n\n<Note>\n  What is a **WorkflowAgent**?\n\n`WorkflowAgent` is a restricted version of the `Agent` class specifically designed for workflow orchestration.\n</Note>\n\nThis is how you can add a `WorkflowAgent` to your workflow:\n\n<img className=\"block dark:hidden\" src=\"https://mintcdn.com/agno-v2/zKmlURgt8K26VBJI/images/workflow-agent-flow-light.png?fit=max&auto=format&n=zKmlURgt8K26VBJI&q=85&s=ec5144a1155be8ca93b18d50be13b084\" alt=\"Workflows conversational workflows diagram\" style={{ maxWidth: '500px', width: '100%', height: 'auto' }} data-og-width=\"958\" width=\"958\" data-og-height=\"1362\" height=\"1362\" data-path=\"images/workflow-agent-flow-light.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/agno-v2/zKmlURgt8K26VBJI/images/workflow-agent-flow-light.png?w=280&fit=max&auto=format&n=zKmlURgt8K26VBJI&q=85&s=e5d8ed7fb9cb4d802b194a8aea60d9ca 280w, https://mintcdn.com/agno-v2/zKmlURgt8K26VBJI/images/workflow-agent-flow-light.png?w=560&fit=max&auto=format&n=zKmlURgt8K26VBJI&q=85&s=5e3bc26dd499d6ce3e5e262f73988ad2 560w, https://mintcdn.com/agno-v2/zKmlURgt8K26VBJI/images/workflow-agent-flow-light.png?w=840&fit=max&auto=format&n=zKmlURgt8K26VBJI&q=85&s=7c24aad031f8caf88fb0b67348140101 840w, https://mintcdn.com/agno-v2/zKmlURgt8K26VBJI/images/workflow-agent-flow-light.png?w=1100&fit=max&auto=format&n=zKmlURgt8K26VBJI&q=85&s=1e6f92a0a2dffd2bd99bf60b893fa4b9 1100w, https://mintcdn.com/agno-v2/zKmlURgt8K26VBJI/images/workflow-agent-flow-light.png?w=1650&fit=max&auto=format&n=zKmlURgt8K26VBJI&q=85&s=95e73e7791ff58af2342aa8efff4a3f8 1650w, https://mintcdn.com/agno-v2/zKmlURgt8K26VBJI/images/workflow-agent-flow-light.png?w=2500&fit=max&auto=format&n=zKmlURgt8K26VBJI&q=85&s=56702e0fdd18e1f8946c2f216b24e1e2 2500w\" />\n\n<img className=\"hidden dark:block\" src=\"https://mintcdn.com/agno-v2/zKmlURgt8K26VBJI/images/workflow-agent-flow-dark.png?fit=max&auto=format&n=zKmlURgt8K26VBJI&q=85&s=a9f050d257d118db37b63c11937397ad\" alt=\"Workflows conversational workflows diagram\" style={{ maxWidth: '500px', width: '100%', height: 'auto' }} data-og-width=\"958\" width=\"958\" data-og-height=\"1332\" height=\"1332\" data-path=\"images/workflow-agent-flow-dark.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/agno-v2/zKmlURgt8K26VBJI/images/workflow-agent-flow-dark.png?w=280&fit=max&auto=format&n=zKmlURgt8K26VBJI&q=85&s=e0d45e2df7934ac3d654039f6c4e1ccb 280w, https://mintcdn.com/agno-v2/zKmlURgt8K26VBJI/images/workflow-agent-flow-dark.png?w=560&fit=max&auto=format&n=zKmlURgt8K26VBJI&q=85&s=ae85021963cbde778149b133472b1991 560w, https://mintcdn.com/agno-v2/zKmlURgt8K26VBJI/images/workflow-agent-flow-dark.png?w=840&fit=max&auto=format&n=zKmlURgt8K26VBJI&q=85&s=f6f984a95ebb6a6bdcf08cf2644d40c9 840w, https://mintcdn.com/agno-v2/zKmlURgt8K26VBJI/images/workflow-agent-flow-dark.png?w=1100&fit=max&auto=format&n=zKmlURgt8K26VBJI&q=85&s=e7323d14876732545fdde33c6b8c83fb 1100w, https://mintcdn.com/agno-v2/zKmlURgt8K26VBJI/images/workflow-agent-flow-dark.png?w=1650&fit=max&auto=format&n=zKmlURgt8K26VBJI&q=85&s=685e3d8f72f6b654fbc6f5e0e52da7f7 1650w, https://mintcdn.com/agno-v2/zKmlURgt8K26VBJI/images/workflow-agent-flow-dark.png?w=2500&fit=max&auto=format&n=zKmlURgt8K26VBJI&q=85&s=0eacd3dc568b6828e48ee8b4f1edf3d1 2500w\" />\n\n## Workflow History for Conversational Workflows:\n\nSimilar to [workflow history for steps](/basics/chat-history/workflow/overview), the `WorkflowAgent` has access to the full history of workflow runs for the current session.\nThis makes it possible to answer questions about previous results, compare outputs from multiple runs, and maintain conversation continuity.\n\n<Tip>\n  How to control the number of previous runs the workflow agent can see?\n\nThe `num_history_runs` parameter controls how many previous workflow runs the agent can see when making decisions. This is crucial for:\n\n* **Context awareness**: The agent needs to see past runs to answer follow-up questions\n  * **Memory limits**: Including too many runs can exceed the model context window\n  * **Performance**: Fewer runs mean faster processing and lower input tokens\n</Tip>\n\n## Instructions for the WorkflowAgent:\n\nYou can provide custom instructions to the `WorkflowAgent` to control its behavior. Although default instructions are provided which instruct the agent to answer directly from history\nor to run the workflow when new processing is needed, you can override them by providing your own instructions.\n\n<Warning>\n  We recommend using the default instructions unless you have a specific use case where you want the agent to answer in a particular way or include some specific information in the response.\n  The default instructions should be sufficient for most use cases.\n</Warning>\n\n```python  theme={null}\nfrom agno.agent import Agent\nfrom agno.db.postgres import PostgresDb\nfrom agno.models.openai import OpenAIChat\nfrom agno.workflow import WorkflowAgent\nfrom agno.workflow.types import StepInput\nfrom agno.workflow.workflow import Workflow\n\ndb_url = \"postgresql+psycopg://ai:ai@localhost:5532/ai\"\n\nstory_writer = Agent(\n    model=OpenAIChat(id=\"gpt-4o-mini\"),\n    instructions=\"You are tasked with writing a 100 word story based on a given topic\",\n)\n\nstory_formatter = Agent(\n    model=OpenAIChat(id=\"gpt-4o-mini\"),\n    instructions=\"You are tasked with breaking down a short story in prelogues, body and epilogue\",\n)\n\ndef add_references(step_input: StepInput):\n    \"\"\"Add references to the story\"\"\"\n\nprevious_output = step_input.previous_step_content\n\nif isinstance(previous_output, str):\n        return previous_output + \"\\n\\nReferences: https://www.agno.com\"",
  "code_samples": [
    {
      "code": "## Architecture\n\n<img className=\"block dark:hidden\" src=\"https://mintcdn.com/agno-v2/zKmlURgt8K26VBJI/images/workflow-agent-flow-light.png?fit=max&auto=format&n=zKmlURgt8K26VBJI&q=85&s=ec5144a1155be8ca93b18d50be13b084\" alt=\"Workflows conversational workflows diagram\" style={{ maxWidth: '500px', width: '100%', height: 'auto' }} data-og-width=\"958\" width=\"958\" data-og-height=\"1362\" height=\"1362\" data-path=\"images/workflow-agent-flow-light.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/agno-v2/zKmlURgt8K26VBJI/images/workflow-agent-flow-light.png?w=280&fit=max&auto=format&n=zKmlURgt8K26VBJI&q=85&s=e5d8ed7fb9cb4d802b194a8aea60d9ca 280w, https://mintcdn.com/agno-v2/zKmlURgt8K26VBJI/images/workflow-agent-flow-light.png?w=560&fit=max&auto=format&n=zKmlURgt8K26VBJI&q=85&s=5e3bc26dd499d6ce3e5e262f73988ad2 560w, https://mintcdn.com/agno-v2/zKmlURgt8K26VBJI/images/workflow-agent-flow-light.png?w=840&fit=max&auto=format&n=zKmlURgt8K26VBJI&q=85&s=7c24aad031f8caf88fb0b67348140101 840w, https://mintcdn.com/agno-v2/zKmlURgt8K26VBJI/images/workflow-agent-flow-light.png?w=1100&fit=max&auto=format&n=zKmlURgt8K26VBJI&q=85&s=1e6f92a0a2dffd2bd99bf60b893fa4b9 1100w, https://mintcdn.com/agno-v2/zKmlURgt8K26VBJI/images/workflow-agent-flow-light.png?w=1650&fit=max&auto=format&n=zKmlURgt8K26VBJI&q=85&s=95e73e7791ff58af2342aa8efff4a3f8 1650w, https://mintcdn.com/agno-v2/zKmlURgt8K26VBJI/images/workflow-agent-flow-light.png?w=2500&fit=max&auto=format&n=zKmlURgt8K26VBJI&q=85&s=56702e0fdd18e1f8946c2f216b24e1e2 2500w\" />\n\n<img className=\"hidden dark:block\" src=\"https://mintcdn.com/agno-v2/zKmlURgt8K26VBJI/images/workflow-agent-flow-dark.png?fit=max&auto=format&n=zKmlURgt8K26VBJI&q=85&s=a9f050d257d118db37b63c11937397ad\" alt=\"Workflows conversational workflows diagram\" style={{ maxWidth: '500px', width: '100%', height: 'auto' }} data-og-width=\"958\" width=\"958\" data-og-height=\"1332\" height=\"1332\" data-path=\"images/workflow-agent-flow-dark.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/agno-v2/zKmlURgt8K26VBJI/images/workflow-agent-flow-dark.png?w=280&fit=max&auto=format&n=zKmlURgt8K26VBJI&q=85&s=e0d45e2df7934ac3d654039f6c4e1ccb 280w, https://mintcdn.com/agno-v2/zKmlURgt8K26VBJI/images/workflow-agent-flow-dark.png?w=560&fit=max&auto=format&n=zKmlURgt8K26VBJI&q=85&s=ae85021963cbde778149b133472b1991 560w, https://mintcdn.com/agno-v2/zKmlURgt8K26VBJI/images/workflow-agent-flow-dark.png?w=840&fit=max&auto=format&n=zKmlURgt8K26VBJI&q=85&s=f6f984a95ebb6a6bdcf08cf2644d40c9 840w, https://mintcdn.com/agno-v2/zKmlURgt8K26VBJI/images/workflow-agent-flow-dark.png?w=1100&fit=max&auto=format&n=zKmlURgt8K26VBJI&q=85&s=e7323d14876732545fdde33c6b8c83fb 1100w, https://mintcdn.com/agno-v2/zKmlURgt8K26VBJI/images/workflow-agent-flow-dark.png?w=1650&fit=max&auto=format&n=zKmlURgt8K26VBJI&q=85&s=685e3d8f72f6b654fbc6f5e0e52da7f7 1650w, https://mintcdn.com/agno-v2/zKmlURgt8K26VBJI/images/workflow-agent-flow-dark.png?w=2500&fit=max&auto=format&n=zKmlURgt8K26VBJI&q=85&s=0eacd3dc568b6828e48ee8b4f1edf3d1 2500w\" />\n\n## Workflow History for Conversational Workflows:\n\nSimilar to [workflow history for steps](/basics/chat-history/workflow/overview), the `WorkflowAgent` has access to the full history of workflow runs for the current session.\nThis makes it possible to answer questions about previous results, compare outputs from multiple runs, and maintain conversation continuity.\n\n<Tip>\n  How to control the number of previous runs the workflow agent can see?\n\n  The `num_history_runs` parameter controls how many previous workflow runs the agent can see when making decisions. This is crucial for:\n\n  * **Context awareness**: The agent needs to see past runs to answer follow-up questions\n  * **Memory limits**: Including too many runs can exceed the model context window\n  * **Performance**: Fewer runs mean faster processing and lower input tokens\n</Tip>\n\n## Instructions for the WorkflowAgent:\n\nYou can provide custom instructions to the `WorkflowAgent` to control its behavior. Although default instructions are provided which instruct the agent to answer directly from history\nor to run the workflow when new processing is needed, you can override them by providing your own instructions.\n\n<Warning>\n  We recommend using the default instructions unless you have a specific use case where you want the agent to answer in a particular way or include some specific information in the response.\n  The default instructions should be sufficient for most use cases.\n</Warning>",
      "language": "unknown"
    },
    {
      "code": "## Usage Example",
      "language": "unknown"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "Quick Start",
      "id": "quick-start"
    },
    {
      "level": "h2",
      "text": "Architecture",
      "id": "architecture"
    },
    {
      "level": "h2",
      "text": "Workflow History for Conversational Workflows:",
      "id": "workflow-history-for-conversational-workflows:"
    },
    {
      "level": "h2",
      "text": "Instructions for the WorkflowAgent:",
      "id": "instructions-for-the-workflowagent:"
    },
    {
      "level": "h2",
      "text": "Usage Example",
      "id": "usage-example"
    }
  ],
  "url": "llms-txt#conversational-workflows",
  "links": []
}
{
  "title": "Supabase MCP agent",
  "content": "Source: https://docs.agno.com/basics/tools/mcp/usage/supabase\n\nUsing the [Supabase MCP server](https://github.com/supabase-community/supabase-mcp) to create an Agent that can create projects, database schemas, edge functions, and more:\n\n```python  theme={null}\n\"\"\"ðŸ”‘ Supabase MCP Agent - Showcase Supabase MCP Capabilities\n\nThis example demonstrates how to use the Supabase MCP server to create projects, database schemas, edge functions, and more.\n\nSetup:\n1. Install Python dependencies: `pip install agno mcp-sdk`\n2. Create a Supabase Access Token: https://supabase.com/dashboard/account/tokens and set it as the SUPABASE_ACCESS_TOKEN environment variable.\n\"\"\"\n\nimport asyncio\nimport os\nfrom textwrap import dedent\n\nfrom agno.agent import Agent\nfrom agno.models.openai import OpenAIChat\nfrom agno.tools.mcp import MCPTools\nfrom agno.tools.reasoning import ReasoningTools\nfrom agno.utils.log import log_error, log_exception, log_info\n\nasync def run_agent(task: str) -> None:\n    token = os.getenv(\"SUPABASE_ACCESS_TOKEN\")\n    if not token:\n        log_error(\"SUPABASE_ACCESS_TOKEN environment variable not set.\")\n        return\n\nnpx_cmd = \"npx.cmd\" if os.name == \"nt\" else \"npx\"\n\ntry:\n        async with MCPTools(\n            f\"{npx_cmd} -y @supabase/mcp-server-supabase@latest --access-token={token}\"\n        ) as mcp:\n            instructions = dedent(f\"\"\"\n                You are an expert Supabase MCP architect. Given the project description:\n                {task}\n\nAutomatically perform the following steps :\n                1. Plan the entire database schema based on the project description.\n                2. Call `list_organizations` and select the first organization in the response.\n                3. Use `get_cost(type='project')` to estimate project creation cost and mention the cost in your response.\n                4. Create a new Supabase project with `create_project`, passing the confirmed cost ID.\n                5. Poll project status with `get_project` until the status is `ACTIVE_HEALTHY`.\n                6. Analyze the project requirements and propose a complete, normalized SQL schema (tables,  columns, data types, indexes, constraints, triggers, and functions) as DDL statements.\n                7. Apply the schema using `apply_migration`, naming the migration `initial_schema`.\n                8. Validate the deployed schema via `list_tables` and `list_extensions`.\n                8. Deploy a simple health-check edge function with `deploy_edge_function`.\n                9. Retrieve and print the project URL (`get_project_url`) and anon key (`get_anon_key`).\n            \"\"\")\n            agent = Agent(\n                model=OpenAIChat(id=\"o4-mini\"),\n                instructions=instructions,\n                tools=[mcp, ReasoningTools(add_instructions=True)],\n                markdown=True,\n            )\n\nlog_info(f\"Running Supabase project agent for: {task}\")\n            await agent.aprint_response(\n                message=task,\n                stream=True,\n                show_full_reasoning=True,\n            )\n    except Exception as e:\n        log_exception(f\"Unexpected error: {e}\")\n\nif __name__ == \"__main__\":\n    demo_description = (\n        \"Develop a cloud-based SaaS platform with AI-powered task suggestions, calendar syncing, predictive prioritization, \"\n        \"team collaboration, and project analytics.\"\n    )\n    asyncio.run(run_agent(demo_description))",
  "code_samples": [],
  "headings": [],
  "url": "llms-txt#supabase-mcp-agent",
  "links": []
}
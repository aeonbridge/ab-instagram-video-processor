{
  "title": "Define specialized agents for meal planning conversation",
  "content": "meal_suggester = Agent(\n    name=\"Meal Suggester\",\n    model=OpenAIChat(id=\"gpt-4o\"),\n    instructions=[\n        \"You are a friendly meal planning assistant who suggests meal categories and cuisines.\",\n        \"Consider the time of day, day of the week, and any context from the conversation.\",\n        \"Keep suggestions broad (Italian, Asian, healthy, comfort food, quick meals, etc.)\",\n        \"Ask follow-up questions to understand preferences better.\",\n    ],\n)\n\nrecipe_specialist = Agent(\n    name=\"Recipe Specialist\",\n    model=OpenAIChat(id=\"gpt-4o\"),\n    instructions=[\n        \"You are a recipe expert who provides specific, detailed recipe recommendations.\",\n        \"Pay close attention to the full conversation to understand user preferences and restrictions.\",\n        \"If the user mentioned avoiding certain foods or wanting healthier options, respect that.\",\n        \"Provide practical, easy-to-follow recipe suggestions with ingredients and basic steps.\",\n        \"Reference the conversation naturally (e.g., 'Since you mentioned wanting something healthier...')\",\n    ],\n)\n\ndef analyze_food_preferences(step_input: StepInput) -> StepOutput:\n    \"\"\"\n    Smart function that analyzes conversation history to understand user food preferences\n    \"\"\"\n    current_request = step_input.input\n    conversation_context = step_input.previous_step_content or \"\"\n\n# Simple preference analysis based on conversation\n    preferences = {\n        \"dietary_restrictions\": [],\n        \"cuisine_preferences\": [],\n        \"avoid_list\": [],\n        \"cooking_style\": \"any\",\n    }\n\n# Analyze conversation for patterns\n    full_context = f\"{conversation_context} {current_request}\".lower()\n\n# Dietary restrictions and preferences\n    if any(word in full_context for word in [\"healthy\", \"healthier\", \"light\", \"fresh\"]):\n        preferences[\"dietary_restrictions\"].append(\"healthy\")\n    if any(word in full_context for word in [\"vegetarian\", \"veggie\", \"no meat\"]):\n        preferences[\"dietary_restrictions\"].append(\"vegetarian\")\n    if any(word in full_context for word in [\"quick\", \"fast\", \"easy\", \"simple\"]):\n        preferences[\"cooking_style\"] = \"quick\"\n    if any(word in full_context for word in [\"comfort\", \"hearty\", \"filling\"]):\n        preferences[\"cooking_style\"] = \"comfort\"\n\n# Foods/cuisines to avoid (mentioned recently)\n    if \"italian\" in full_context and (\n        \"had\" in full_context or \"yesterday\" in full_context\n    ):\n        preferences[\"avoid_list\"].append(\"Italian\")\n    if \"chinese\" in full_context and (\n        \"had\" in full_context or \"recently\" in full_context\n    ):\n        preferences[\"avoid_list\"].append(\"Chinese\")\n\n# Preferred cuisines mentioned positively\n    if \"love asian\" in full_context or \"like asian\" in full_context:\n        preferences[\"cuisine_preferences\"].append(\"Asian\")\n    if \"mediterranean\" in full_context:\n        preferences[\"cuisine_preferences\"].append(\"Mediterranean\")\n\n# Create guidance for the recipe agent\n    guidance = []\n    if preferences[\"dietary_restrictions\"]:\n        guidance.append(\n            f\"Focus on {', '.join(preferences['dietary_restrictions'])} options\"\n        )\n    if preferences[\"avoid_list\"]:\n        guidance.append(\n            f\"Avoid {', '.join(preferences['avoid_list'])} cuisine since user had it recently\"\n        )\n    if preferences[\"cuisine_preferences\"]:\n        guidance.append(\n            f\"Consider {', '.join(preferences['cuisine_preferences'])} options\"\n        )\n    if preferences[\"cooking_style\"] != \"any\":\n        guidance.append(f\"Prefer {preferences['cooking_style']} cooking style\")\n\nanalysis_result = f\"\"\"\n        PREFERENCE ANALYSIS:\n        Current Request: {current_request}\n\nDetected Preferences:\n        {chr(10).join(f\"• {g}\" for g in guidance) if guidance else \"• No specific preferences detected\"}\n\nRECIPE AGENT GUIDANCE:\n        Based on the conversation history, please provide recipe recommendations that align with these preferences.\n        Reference the conversation naturally and explain why these recipes fit their needs.\n    \"\"\".strip()\n\nreturn StepOutput(content=analysis_result)",
  "code_samples": [],
  "headings": [],
  "url": "llms-txt#define-specialized-agents-for-meal-planning-conversation",
  "links": []
}